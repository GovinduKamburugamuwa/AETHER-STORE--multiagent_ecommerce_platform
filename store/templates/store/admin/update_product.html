{% extends "store/baseAdmin.html" %}
{% block content %}

<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    <h2 class="text-2xl font-bold mb-6">Update Product</h2>
    <p class="text-gray-600 mb-8">Modify product details or remove from inventory</p>

    {% if messages %}
    <div class="mb-4">
        {% for message in messages %}
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}
        <input type="hidden" name="action" value="update">
        
        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="name">
                Product Name
            </label>
            <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="text" 
                   id="name" 
                   name="name" 
                   value="{{ product.name }}" 
                   readonly>
        </div>

        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="price">
                Price (Rs.)
            </label>
            <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="number" 
                   id="price" 
                   name="price" 
                   value="{{ product.price }}" 
                   step="0.01" 
                   required>
        </div>

        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="stock_level">
                Stock Level
            </label>
            <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="number" 
                   id="stock_level" 
                   name="stock_level" 
                   value="{{ product.stock }}" 
                   required>
        </div>

        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="discount">
                Discount (%)
            </label>
            <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="number" 
                   id="discount" 
                   name="discount" 
                   value="{{ product.discount }}" 
                   min="0" 
                   max="100" 
                   step="0.1" 
                   required>
        </div>

        <div class="mb-4">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="image">
                New Image (optional)
            </label>
            <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                   type="file" 
                   id="image" 
                   name="image" 
                   accept="image/*">
        </div>

        <div class="flex items-center justify-between mt-8">
            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                    type="submit">
                Update Product
            </button>
        </div>
    </form>

    <form method="POST" class="mt-8">
        {% csrf_token %}
        <input type="hidden" name="action" value="delete">
        <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                type="submit"
                onclick="return confirm('Are you sure you want to delete this product?')">
            Delete Product
        </button>
    </form>
</div>

{% endblock %}